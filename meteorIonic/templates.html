<template name="templates/private">
    <ion-nav-view name="home-private"></ion-nav-view>
</template>


<template name="loginWrapper">
  <meteor-include src="loginButtons"></meteor-include>
    <button class="button button-balanced button-full"
                 ng-click="openModal()"> Login</button>
</template>

<template name="login">
<div class="modal">

    <!-- Modal header bar -->
    <ion-header-bar class="bar bar-header bar-secondary">
      <h1 class="title">Login</h1>
      <button class="button button-clear button-positive" ng-click="closeModal()">Cancel</button>
    </ion-header-bar>

    <!-- Modal content area --> 
    <ion-content has-header="true" scroll="false">

    <div class="padding">
        <button type="submit" class="button button-block button-positive" ng-click="loginWithFacebook()">Login with Facebook</button>
      </div>
      <div class="padding">
        <button type="submit" class="button button-block button-assertive" ng-click="loginWithGoogle()">Login with Google</button>
      </div>

      <div class="card padding">
        <form ng-submit="createTask(task)">
          <label class="item item-input">
            <input type="text" placeholder="Email" ng-model="login.email">
          </label>
          <label class="item item-input">
            <input type="password" placeholder="Password" ng-model="login.password">
          </label>

          <button type="submit" class="button button-block button-royal">Login</button>
      </form>
      </div>

      

    </ion-content> 
  </div>
<!--     <ion-modal-view>
        <ion-header-bar>
            <h1 class="title">My Modal title</h1>
        </ion-header-bar>
        <ion-content>
            
        </ion-content>
    </ion-modal-view> -->
</template>


<template name="lobbySelect">
  <div class="item item-divider">
                    Select lobby: [[ data.lobby ]]
                </div>

                <ion-radio ng-repeat="lobby in lobbies"
                           ng-value="lobby._id"
                           ng-model="data.lobby"
                           ng-change="selectLobby(lobby)"
                           name="select-lobby">
                    [[ lobby.title ]]
                </ion-radio>
</template>

<template name="arenaSelect">
  <div class="item item-divider">
                    Select screen: [[ data.arena ]]
                </div>

                <ion-radio ng-repeat="arena in arenas"
                           ng-value="arena._id"
                           ng-model="data.arena"
                           ng-change="selectArena(arena)"
                           name="select-arena">
                    [[ arena.title ]]
                </ion-radio>
</template>

<template name="templates/private/home">
    <ion-view title="Home">
        <ion-content class="padding">

            <div ng-if="!data.user" class="padding">
            {{>loginWrapper}}
            </div>
            
            <div ng-if="data.user">

              <div class="card">
                <div class="item item-thumbnail-left">
                      <img ng-src="[[ data.user.profile.avatar ]]">
                      <h2>[[ data.user.profile.name ]]</h2>
                  </div>

                  <button class="button button-assertive button-full"
                   ng-click="logout()"> Logout</button>
                </div>

              <div class="list padding">

                {{>lobbySelect}}

                {{>arenaSelect}}

              </div>
              <div ng-if="data.lobby!=null && data.arena!=null">
              <a
                      class="button button-full icon-right ion-chevron-right button-calm"
                      href="#/public/lobby">Enter Lobby</a>
              </div>
            </div>

            
        </ion-content>
    </ion-view>
</template>



<template name="templates/public">
    <ion-nav-view name="home-public"></ion-nav-view>
</template>


<template name="templates/public/home">
    <ion-view title="Home">
        <ion-content class="padding">
            
            <div class="list">

                {{>lobbySelect}}

                {{>arenaSelect}}

            </div>
            <div ng-if="data.lobby!=null && data.arena!=null">
            <a
                    class="button button-full icon-right ion-chevron-right button-calm"
                    href="#/public/lobby">Register Arena</a>
            </div>
        </ion-content>
    </ion-view>
</template>


<template name="templates/private/lobby">
    <ion-view title="Lobby">
        <ion-content class="padding">
            
            <p>
                <a
                        class="button icon-left ion-chevron-left button-clear button-dark" href="#/public/home">Back</a>
            </p>

            <div class="list">
              <div class="item item-divider">
                  Connected Users
              </div>

              <div ng-repeat="user in users" class="item item-thumbnail-left">
                      <img ng-src="[[ user.profile.avatar ]]">
                      <h2>[[ user.profile.name ]]</h2>
                  </div>

              </div>

            <p>
                <a
                        class="button button-full icon-right ion-chevron-right button-calm"
                   href="#/public/game">Start Game</a>
            </p>
        </ion-content>
    </ion-view>
</template>

<template name="templates/public/lobby">
    <ion-view title="Lobby">
        <ion-content class="padding">
            <p>

                <a
                        class="button icon-left ion-chevron-left button-clear button-dark" href="#/public/home">Back</a>

            </p>
            <div class="row">
              
              <div class="col">
                <div class="list">
                  <div class="item item-divider">
                      All Connected Users
                  </div>

                  <div ng-repeat="user in users" class="item item-thumbnail-left">
                          <img ng-src="[[ user.profile.avatar ]]">
                          <h2>[[ user.profile.name ]]</h2>
                      </div>

                  </div>
                </div>

                <div class="col">
                <div class="list">
                  <div class="item item-divider">
                      All Connected Users
                  </div>

                  <div ng-repeat="user in users" class="item item-thumbnail-left">
                          <img ng-src="[[ user.profile.avatar ]]">
                          <h2>[[ user.profile.name ]]</h2>
                      </div>

                  </div>
                </div>
              
                <div class="col">
                <div class="list">
                  <div class="item item-divider">
                      All Connected Users
                  </div>

                  <div ng-repeat="user in users" class="item item-thumbnail-left">
                          <img ng-src="[[ user.profile.avatar ]]">
                          <h2>[[ user.profile.name ]]</h2>
                      </div>

                  </div>
                </div>

              </div>
            
            <p>
                <a
                        class="button button-full icon-right ion-chevron-right button-calm"
                   href="#/public/game">Start Game</a>
            </p>
        </ion-content>
    </ion-view>
</template>


<template name="game-world">
    <ion-view title="Game">
        <ion-content class="padding">
            <a
                    class="button icon-left ion-chevron-left button-clear button-dark" href="#/public/lobby">Back</a>
            <!-- anchors for game stage -->
            <div id="context2D-main"></div>
            <div id="hit-area"></div>
        </ion-content>
    </ion-view>
</template>